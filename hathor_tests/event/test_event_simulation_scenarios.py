#  Copyright 2023 Hathor Labs
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

import pytest

from hathor.event.model.base_event import BaseEvent
from hathor.event.model.event_data import (
    DecodedTxOutput,
    EmptyData,
    NCEventData,
    ReorgData,
    SpentOutput,
    TxData,
    TxDataWithoutMeta,
    TxInput,
    TxMetadata,
    TxOutput,
)
from hathor.event.model.event_type import EventType
from hathor.event.websocket.request import StartStreamRequest
from hathor.event.websocket.response import EventResponse
from hathor.transaction import Block, Transaction
from hathor_cli.events_simulator.scenario import Scenario
from hathor_tests.event.event_simulation_tester import BaseEventSimulationTester


class EventSimulationScenariosTest(BaseEventSimulationTester):
    """
    NOTE: The lists of expected events used in tests below were generated by printing the event responses list to the
    console and then copying the output and manipulating it to create instances.
    """

    seed_config = 6946502462188444706

    def setUp(self) -> None:
        super().setUp()
        self.genesis_block_hash = self._settings.GENESIS_BLOCK_HASH.hex()
        self.genesis_tx1_hash = self._settings.GENESIS_TX1_HASH.hex()
        self.genesis_tx2_hash = self._settings.GENESIS_TX2_HASH.hex()

    def assert_response_equal(self, responses: list[EventResponse], expected: list[EventResponse]) -> None:
        """Compare responses and expected responses.
        """
        self.assertEqual(len(responses), len(expected), f'\nexpected: {expected}\nactual: {responses}')

        for a, b in zip(responses, expected):
            self.assertEqual(type(a), type(b))
            self.assertEqual(a.__fields__, b.__fields__)
            self.assertEqual(a.event.__fields__, b.event.__fields__)
            self.assertEqual(a.event.data.__fields__, b.event.data.__fields__)

            for field in ['type', 'peer_id', 'network', 'latest_event_id', 'stream_id']:
                self.assertEqual(getattr(a, field), getattr(b, field))

            for field in ['id', 'type', 'group_id']:
                self.assertEqual(getattr(a.event, field), getattr(b.event, field))

            self.assertEqual(type(a.event.data), type(b.event.data))

    def test_only_load(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.ONLY_LOAD.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=1578878880.0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=4, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=4, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=4, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=4, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=1578878880.0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=4, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_single_chain_one_block(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.SINGLE_CHAIN_ONE_BLOCK.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=1578878880.0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=1578878880.0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=9, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_single_chain_blocks_and_transactions(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.SINGLE_CHAIN_BLOCKS_AND_TRANSACTIONS.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=1578878880.0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=1578878880.0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED and one NEW_VERTEX_ACCEPTED for 10 new blocks
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=1578878970.5, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=1578878970.5, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=['5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=1578878970.5, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a tx, adding the new tx as spending their output and children  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=1578879030.75, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=18.4904519466213, inputs=[TxInput(tx_id='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', index=0, spent_output=TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)))], outputs=[TxOutput(value=3400, token_data=0, script='dqkUmkey79Rbhjq4BtHYCm2mT8hDprWIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLatLcoaATFMqECb5fD5rdW2nF9WGyw9os', timelock=None)), TxOutput(value=2000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.49045136082641, score=0.0, accumulated_weight_raw="368282", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=1578879030.75, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[SpentOutput(index=0, tx_ids=['d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=1578879030.75, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=18.4904519466213, inputs=[TxInput(tx_id='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', index=0, spent_output=TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)))], outputs=[TxOutput(value=3400, token_data=0, script='dqkUmkey79Rbhjq4BtHYCm2mT8hDprWIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLatLcoaATFMqECb5fD5rdW2nF9WGyw9os', timelock=None)), TxOutput(value=2000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.49045136082641, score=0.0, accumulated_weight_raw="368282", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each confirmed transaction (first block changed) # noqa E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=1578879091.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUTisHvpM4sDeINzxF5auK/8bP6UaIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDeSe6qKqjSLwtnjLBV84NddtZQyNb9HUU', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', 'd2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', '5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=19.576585834390443, accumulated_weight_raw="256", score_raw="781879", first_block=None, height=12, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=1578879091.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=18.4904519466213, inputs=[TxInput(tx_id='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', index=0, spent_output=TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)))], outputs=[TxOutput(value=3400, token_data=0, script='dqkUmkey79Rbhjq4BtHYCm2mT8hDprWIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLatLcoaATFMqECb5fD5rdW2nF9WGyw9os', timelock=None)), TxOutput(value=2000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.49045136082641, score=0.0, accumulated_weight_raw="368282", score_raw="0", first_block='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, timestamp=1578879091.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[SpentOutput(index=0, tx_ids=['d2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, timestamp=1578879091.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUTisHvpM4sDeINzxF5auK/8bP6UaIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDeSe6qKqjSLwtnjLBV84NddtZQyNb9HUU', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', 'd2bd5f83fcbfa5dee2b602ddc18ebd4f7714e1ecf928824f862efb0559dcb4d6', '5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='7c7449a44a6adf26fb9b68f8c2b7751905c788b417946c43b8a999d0b66f76d9', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=19.576585834390443, accumulated_weight_raw="256", score_raw="781879", first_block=None, height=12, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    @pytest.mark.skip(reason='broken')
    def test_reorg(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.REORG.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=1578878880.0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=1578878880.0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=1578878940.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', nonce=0, timestamp=1578878940, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=1578878940.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=1578878940.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block from manager1
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=1578878940.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', nonce=0, timestamp=1578878940, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            # Also one VERTEX_METADATA_CHANGED for the previous block, voiding it
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=1578879064.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', nonce=0, timestamp=1578879000, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUfBo1MGBHkHtXDktO+BxtBdh5T5GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HHqKa5Y6viZ8fkH2bd1qQBdsZnrtsmruqS', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', spent_outputs=[], conflict_with=[], voided_by=['1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533'], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=1578879064.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', nonce=0, timestamp=1578878940, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', spent_outputs=[], conflict_with=[], voided_by=['82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a'], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=1578879064.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=1578879064.0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block from manager2
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=1578879064.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', nonce=0, timestamp=1578879000, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUfBo1MGBHkHtXDktO+BxtBdh5T5GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HHqKa5Y6viZ8fkH2bd1qQBdsZnrtsmruqS', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', spent_outputs=[], conflict_with=[], voided_by=['1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533'], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # REORG_STARTED caused by a new block from manager2 (below)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=1578879064.25, type=EventType.REORG_STARTED, data=ReorgData(reorg_size=1, previous_best_block='82afedcd590f7ad34d09475fc1dfd00e5a0f8ad6b70508ca4659351709c90f9a', new_best_block='38e7f91420ae78ae01707f80c29abe692beebf9d5575cc7c9248e9bdc78169c1', common_block='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792'), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            # Also one VERTEX_METADATA_CHANGED for the previous block, un-voiding it as it's now part of the best blockchain  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=1578879064.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='38e7f91420ae78ae01707f80c29abe692beebf9d5575cc7c9248e9bdc78169c1', nonce=0, timestamp=1578879001, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUgQrqLefPfPVpkXlfvvAp943epyOIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJHSdTickduA1MF9PTbzBQi6Z7stNAzwAu', timelock=None))], parents=['1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='38e7f91420ae78ae01707f80c29abe692beebf9d5575cc7c9248e9bdc78169c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=1578879064.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', nonce=0, timestamp=1578879000, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUfBo1MGBHkHtXDktO+BxtBdh5T5GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HHqKa5Y6viZ8fkH2bd1qQBdsZnrtsmruqS', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=1578879064.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', height=0, validation='full'), aux_pow=None), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=1578879064.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', height=0, validation='full'), aux_pow=None), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # REORG_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=1578879064.25, type=EventType.REORG_FINISHED, data=EmptyData(), group_id=0), latest_event_id=21, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block from manager2
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=1578879064.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='38e7f91420ae78ae01707f80c29abe692beebf9d5575cc7c9248e9bdc78169c1', nonce=0, timestamp=1578879001, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUgQrqLefPfPVpkXlfvvAp943epyOIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJHSdTickduA1MF9PTbzBQi6Z7stNAzwAu', timelock=None))], parents=['1204b8c30f0236ae6f1841d0c4805a47089c4d5e3ccd0dcab8aa65f0e4991533', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='38e7f91420ae78ae01707f80c29abe692beebf9d5575cc7c9248e9bdc78169c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=21, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_unvoided_transaction(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.UNVOIDED_TRANSACTION.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, type=EventType.LOAD_STARTED, timestamp=0, data=EmptyData(), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, type=EventType.LOAD_FINISHED, timestamp=0, data=EmptyData(), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED and one NEW_VERTEX_ACCEPTED for 10 new blocks
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=19.0005, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=19.00050072657387, score=0.0, accumulated_weight_raw="524470", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=19.0005, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=19.00050072657387, score=0.0, accumulated_weight_raw="524470", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output, and one VERTEX_METADATA_CHANGED adding the new tx as twin/conflict of the previous tx # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=19.0, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', spent_outputs=[], conflict_with=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], voided_by=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], received_by=[], twins=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], accumulated_weight=19.0, score=0.0, accumulated_weight_raw="524288", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=19.0005, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', spent_outputs=[], conflict_with=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], voided_by=[], received_by=[], twins=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], accumulated_weight=19.00050072657387, score=0.0, accumulated_weight_raw="524470", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', '0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx that is a twin of the previous one. It's voided.
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=19.0, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', spent_outputs=[], conflict_with=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], voided_by=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], received_by=[], twins=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], accumulated_weight=19.0, score=0.0, accumulated_weight_raw="524288", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each twin tx, inverting the voided state of them. # noqa E501
            # The order of events is important, we receive the voided txs first, then reverse topological ordering.
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=19.0005, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4', spent_outputs=[], conflict_with=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], voided_by=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], received_by=[], twins=['0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], accumulated_weight=19.00050072657387, score=0.0, accumulated_weight_raw="524470", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='24707288e7c72c5e74c68241ee32d64239902533e64946de6e6cddb66ef3432a', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='24707288e7c72c5e74c68241ee32d64239902533e64946de6e6cddb66ef3432a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=19.000858282039708, accumulated_weight_raw="256", score_raw="524600", first_block=None, height=12, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, type=EventType.VERTEX_METADATA_CHANGED, timestamp=0, data=TxData(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=19.0, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88', spent_outputs=[], conflict_with=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], voided_by=[], received_by=[], twins=['cba55aadc9fd8d5bdb6f394d8f5eb00cc775db12c2512c9e37df8e31ca3841f4'], accumulated_weight=19.000704269011248, score=0.0, accumulated_weight_raw="524544", score_raw="0", first_block='24707288e7c72c5e74c68241ee32d64239902533e64946de6e6cddb66ef3432a', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=40, type=EventType.NEW_VERTEX_ACCEPTED, timestamp=0, data=TxData(hash='24707288e7c72c5e74c68241ee32d64239902533e64946de6e6cddb66ef3432a', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '0639e93ff22647ed06af3ac3a3bc7dd2ca8db18c67fdd9a039318b4d6bf51a88'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='24707288e7c72c5e74c68241ee32d64239902533e64946de6e6cddb66ef3432a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=19.000858282039708, accumulated_weight_raw="256", score_raw="524600", first_block=None, height=12, validation='full'), aux_pow=None), group_id=None), latest_event_id=40, stream_id=stream_id),  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_invalid_mempool(self) -> None:
        # This test implementation is depending on 10 blocks, improve this after refactor to dag builder
        self._prepare(reward_spend_min_blocks=10)
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.INVALID_MEMPOOL_TRANSACTION.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=1578878880.0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=1578878880.0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=1578878880.0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED and one NEW_VERTEX_ACCEPTED for 10 new blocks
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=1578878910.25, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=1578878910.25, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=1578878970.5, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=1578878970.5, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=['5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=1578878970.5, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.656777477108076, score=0.0, accumulated_weight_raw="413285", score_raw="0", first_block=None, height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # REORG_STARTED caused by a block with lower height but higher weight (below)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=0, type=EventType.REORG_STARTED, data=ReorgData(reorg_size=2, previous_best_block='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', new_best_block='2e3122412eb129c7f0d03e37d8a5637da9354df980a2259332b2b14e7a340d94', common_block='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6'), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for each block that was voided by the reorg
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb'], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7'], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for the new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='2e3122412eb129c7f0d03e37d8a5637da9354df980a2259332b2b14e7a340d94', nonce=0, timestamp=1578879030, signal_bits=0, version=0, weight=10.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='', decoded={})], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='2e3122412eb129c7f0d03e37d8a5637da9354df980a2259332b2b14e7a340d94', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=10.0, score=10.066089190457772, accumulated_weight_raw="1024", score_raw="1072", first_block=None, height=10, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for the block that had its output unspent, since the previous tx was removed
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=[])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for each parent of the tx that was removed
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full'), aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One VERTEX_REMOVED for the tx above
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=40, timestamp=0, type=EventType.VERTEX_REMOVED, data=TxDataWithoutMeta(hash='5453759e15a6413a06390868cbb56509704c6f3f7d25f443556d8d6b2dacc650', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.656776158409354, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # REORG_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=41, timestamp=0, type=EventType.REORG_FINISHED, data=EmptyData(), group_id=0), latest_event_id=42, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for the block that caused the reorg
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=42, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='2e3122412eb129c7f0d03e37d8a5637da9354df980a2259332b2b14e7a340d94', nonce=0, timestamp=1578879030, signal_bits=0, version=0, weight=10.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='', decoded={})], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='2e3122412eb129c7f0d03e37d8a5637da9354df980a2259332b2b14e7a340d94', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=10.0, score=10.066089190457772, accumulated_weight_raw="1024", score_raw="1072", first_block=None, height=10, validation='full'), aux_pow=None), group_id=None), latest_event_id=42, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_empty_script(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.EMPTY_SCRIPT.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their first block  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED and one NEW_VERTEX_ACCEPTED for 10 new blocks
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['8ab45f3b35f8dc437fb4a246d9b7dd3d3d5cfb7270e516076718a7a94598cf2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['32fea29451e575e9e001f55878f4df61a2f6cf0212c4b9cbfb8125691d5377a8', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['896593a8103553e6f54c46901f8c14e62618efe7f18c5afd48cf26e96db9e393', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['0b71c21b8000f05241283a848b99e38f27a94a188def7ef1b93f8b0828caba49', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['97b711632054189cbeb1ef4707b7d48c84e6af9a0395a4484030fb3202e691e3', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['6b5e6201d81381a49fa7febe15f46d440360d8e7b1a0ddbe42e59889f32af56e', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['fdc65dbd3675a01a39343dd0c4a05eea471c3bd7015bb96cea0bde7143e24c5d', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['eb3c4684dfad95a5b9d1c88f3463b91fe44bbe7b00e4b810648ca9e9ff5685a6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['1eb8f2c848828831c0e50f13b6ea54cac99494031ebad0318c7b142acb5540b7', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.449427506558003, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.44942676691887, score=0.0, accumulated_weight_raw="357957", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', spent_outputs=[SpentOutput(index=0, tx_ids=['ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.449427506558003, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.44942676691887, score=0.0, accumulated_weight_raw="357957", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a tx, adding the new tx as spending their output and children  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=15.990494828748208, inputs=[TxInput(tx_id='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', index=1, spent_output=TxOutput(value=1000, token_data=0, script='', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=15.990502884098087, score=0.0, accumulated_weight_raw="65106", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.449427506558003, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', spent_outputs=[SpentOutput(index=1, tx_ids=['3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.44942676691887, score=0.0, accumulated_weight_raw="357957", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=15.990494828748208, inputs=[TxInput(tx_id='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', index=1, spent_output=TxOutput(value=1000, token_data=0, script='', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=15.990502884098087, score=0.0, accumulated_weight_raw="65106", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each confirmed transaction (first block changed) # noqa E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmkey79Rbhjq4BtHYCm2mT8hDprWIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLatLcoaATFMqECb5fD5rdW2nF9WGyw9os', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', '3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', 'ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=18.691576556156242, accumulated_weight_raw="256", score_raw="423375", first_block=None, height=12, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=15.990494828748208, inputs=[TxInput(tx_id='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', index=1, spent_output=TxOutput(value=1000, token_data=0, script='', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None))], parents=['ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=15.990502884098087, score=0.0, accumulated_weight_raw="65106", score_raw="0", first_block='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.449427506558003, inputs=[TxInput(tx_id='9b83e5dbc7145a5a161c34da4bec4e1a64dc02a3f2495a2db78457426c9ee6bf', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUPXOcGnrN0ZB2WrnPVcjdCCcacL+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC846khX278aM1utqAgPzkKAxBTfftaRDm', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUutgaVG8W5OnzgAEVUqB4XgmDgm2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPZ4x7a2NXdrMa5ksPfeGMZmjhJHTjDZ9Q', timelock=None)), TxOutput(value=1000, token_data=0, script='', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d', spent_outputs=[SpentOutput(index=1, tx_ids=['3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.44942676691887, score=0.0, accumulated_weight_raw="357957", score_raw="0", first_block='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmkey79Rbhjq4BtHYCm2mT8hDprWIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLatLcoaATFMqECb5fD5rdW2nF9WGyw9os', timelock=None))], parents=['f349fc0f570a636a440ed3853cc533faa2c4616160e1d9eb6f5d656a90da30fb', '3cd0d6caa93fcb179cfcd68c2faca1be2cca20cafa339bac10c57e64b9404f11', 'ea8f1b24846331047e73a33c23210ac2af1d812f14f0225a26337e52aab2435d'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='da38db48836d99beec10aece24c41f6d9f6a55ab5566d7ef5851af2952fb607d', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=18.691576556156242, accumulated_weight_raw="256", score_raw="423375", first_block=None, height=12, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id)]  # noqa: E501

        self.assert_response_equal(responses, expected)

    def test_custom_script(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        Scenario.CUSTOM_SCRIPT.simulate(self.simulator, self.manager)
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', nonce=0, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU/QUFm2AGJJVDuC82h2oXxz/SJnuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HVayMofEDh4XGsaQJeRJKhutYxYodYNop6', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their first block  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, metadata=TxMetadata(hash='', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw="4", score_raw="4", first_block='', height=0, validation='full'), aux_pow=None), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED and one NEW_VERTEX_ACCEPTED for 10 new blocks
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', nonce=0, timestamp=1578878911, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUu9S/kjy3HbglEu3bA4JargdORiiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPeHcEFtRZvMBijqFwccicDMkN17hoNq21', timelock=None))], parents=['2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.321928094887363, accumulated_weight_raw="4", score_raw="20", first_block=None, height=2, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', nonce=0, timestamp=1578878912, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUzskI6jayLvTobJDhpVZiuMu7zt+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRNWR1HpdAiDx7va9VkNUuqqSo2MGW5iE6', timelock=None))], parents=['8b3f0d414755bf6a071deb83b51c5276e41b076b14307123399b804a022f7b19', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.584962500721156, accumulated_weight_raw="4", score_raw="24", first_block=None, height=3, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', nonce=0, timestamp=1578878913, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU7B7Cf/pnj2DglfhnqyiRzxNg+K2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HU3chqobPRBt8pjYXt4WahKERjV8UMCWbd', timelock=None))], parents=['1aa2c724f1932b04a8358ab41a9bca864c3528b69afcc8df83e104cad3247a62', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.807354922057604, accumulated_weight_raw="4", score_raw="28", first_block=None, height=4, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', nonce=0, timestamp=1578878914, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUZmTJ0of2Ce9iuycIVpFCVU08WmKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFrY3outhFVXGLEvaVKVFkd2nB1ihumXCr', timelock=None))], parents=['3ec4aadfbcd5aa4cbf14f6198b56d30158e865f8e907e494d7a7813ac6b6b5e6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.0, accumulated_weight_raw="4", score_raw="32", first_block=None, height=5, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', nonce=0, timestamp=1578878915, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPNN8M/qangqd2wYSzu0u+3OmwDmIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HC4kH6pnYBofzTSFWRpA71Po7geNURh5p2', timelock=None))], parents=['ce9cca7b876ea1cfa3b47e3a8d63c054cf974a3aa421c1bc1dba13e9b44a2f2f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.169925001442312, accumulated_weight_raw="4", score_raw="36", first_block=None, height=6, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', nonce=0, timestamp=1578878916, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUxbNqvpWbgNtk9km/VuYhzHHMp76IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HQYUSF8ytNmm92GYMCS8XPYkt3JeKkBDyj', timelock=None))], parents=['61179abc731d966f722d0d8b06a9d405672065887279bf9a5d13f90e18d3faea', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.321928094887363, accumulated_weight_raw="4", score_raw="40", first_block=None, height=7, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', nonce=0, timestamp=1578878917, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkU48C0XcFpiaWq2gwTICyEVdvJXcCIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HTHNdEhmQeECj5brwUzHK4Sq3fFrFiEvaK', timelock=None))], parents=['95f79d8bb3363ea030d209428c11f0a77bb675f42c59892f66eeb0c90f437084', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.459431618637297, accumulated_weight_raw="4", score_raw="44", first_block=None, height=8, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', nonce=0, timestamp=1578878918, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUmQRjqRyxq26raJZnhnpRJsrS9n2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HLUD2fi9udkg3ysPKdGvbWDyHFWdXBY1i1', timelock=None))], parents=['c4707e982d6d980b3ec5501b0e2c43eed55439d4b6fb34565694fe58e00cac1a', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.584962500721156, accumulated_weight_raw="4", score_raw="48", first_block=None, height=9, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', nonce=0, timestamp=1578878919, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUYFHjcujZZHs0JWZkriEbn5jTv/aIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HFJRMUG7GTjdqG5f6e5tqnrnquBMFCvvs2', timelock=None))], parents=['db4d5e585d0c70f69bab6e61405078b6435dac84e7b731a85f97a282b1f3d9c1', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.700439718141092, accumulated_weight_raw="4", score_raw="52", first_block=None, height=10, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUBvl1aaAtzoh8a9vaZoqXA6JxK4OIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H7A1HBirZ4EhWtCWLcAy4yw6ybWcKnjdfG', timelock=None))], parents=['09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', nonce=0, timestamp=1578878920, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUBvl1aaAtzoh8a9vaZoqXA6JxK4OIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H7A1HBirZ4EhWtCWLcAy4yw6ybWcKnjdfG', timelock=None))], parents=['09a4e391189dce39b747ce9e2231e7079cf737a173d9004a68826c52051f2bdc', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=5.807354922057604, accumulated_weight_raw="4", score_raw="56", first_block=None, height=11, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a block, adding the new tx as spending their output  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.55128132611371, inputs=[TxInput(tx_id='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None)), TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.55128018336992, score=0.0, accumulated_weight_raw="384142", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', nonce=0, timestamp=1578878910, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['339f47da87435842b0b1b528ecd9eac2495ce983b3e9c923a37e1befbe12c792', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', spent_outputs=[SpentOutput(index=0, tx_ids=['cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw="4", score_raw="16", first_block=None, height=1, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.55128132611371, inputs=[TxInput(tx_id='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None)), TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.55128018336992, score=0.0, accumulated_weight_raw="384142", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new tx (below), and one VERTEX_METADATA_CHANGED for a tx, adding the new tx as spending their output and children  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=16.12160141040609, inputs=[TxInput(tx_id='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', index=1, spent_output=TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=16.12159422192467, score=0.0, accumulated_weight_raw="71299", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.55128132611371, inputs=[TxInput(tx_id='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None)), TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', spent_outputs=[SpentOutput(index=1, tx_ids=['3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.55128018336992, score=0.0, accumulated_weight_raw="384142", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new tx
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=16.12160141040609, inputs=[TxInput(tx_id='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', index=1, spent_output=TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=16.12159422192467, score=0.0, accumulated_weight_raw="71299", score_raw="0", first_block=None, height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each confirmed transaction (first block changed) # noqa E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUTisHvpM4sDeINzxF5auK/8bP6UaIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDeSe6qKqjSLwtnjLBV84NddtZQyNb9HUU', timelock=None))], parents=['8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', '3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', 'cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=18.79789262729119, accumulated_weight_raw="256", score_raw="455753", first_block=None, height=12, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', nonce=0, timestamp=1578879030, signal_bits=0, version=1, weight=16.12160141040609, inputs=[TxInput(tx_id='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', index=1, spent_output=TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={}))], outputs=[TxOutput(value=1000, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None))], parents=['cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=16.12159422192467, score=0.0, accumulated_weight_raw="71299", score_raw="0", first_block='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', nonce=0, timestamp=1578878970, signal_bits=0, version=1, weight=18.55128132611371, inputs=[TxInput(tx_id='2ceb49662c7a9b468a93d2f1bb5849e9412b6e2e6b6bec8df8d6dc65d48ad4e9', index=0, spent_output=TxOutput(value=6400, token_data=0, script='dqkUXRFxfhIYOXURHjiAlx9XPuMh7E2IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HF1E8Aibb17Rha6r1cM1oCp74DRmYqP61V', timelock=None)))], outputs=[TxOutput(value=5400, token_data=0, script='dqkUFgE9a6rVMusN303z18sYfjdpYGqIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H8XUjiUx24WLXUN63da34hX6bEs29GJjSs', timelock=None)), TxOutput(value=1000, token_data=0, script='CXNvbWVfZGF0YYhR', decoded={})], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec', spent_outputs=[SpentOutput(index=1, tx_ids=['3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.55128018336992, score=0.0, accumulated_weight_raw="384142", score_raw="0", first_block='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', height=0, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for a new block
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', nonce=0, timestamp=1578879090, signal_bits=0, version=0, weight=8.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUTisHvpM4sDeINzxF5auK/8bP6UaIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDeSe6qKqjSLwtnjLBV84NddtZQyNb9HUU', timelock=None))], parents=['8fa74324107529b23223b1639a9c8a37cb8bdbb25aa8c5476a49c1095d152218', '3fbdad9949edf66d099421003ec68bde17d5240305baecf2432a8e1bc2ff47a3', 'cd2ef92d046cbd5bbcedc60f1bfb412dca1b3e3352a9ac80e9d92679d38715ec'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='99d29ec48a3a088dbd786b411daabbc7111974b97abc271a2e338cf46c081302', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=8.0, score=18.79789262729119, accumulated_weight_raw="256", score_raw="455753", first_block=None, height=12, validation='full')), group_id=None), latest_event_id=39, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def test_nc_events(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        artifacts = Scenario.NC_EVENTS.simulate(self.simulator, self.manager)
        assert artifacts is not None
        self._start_stream()

        b1, b2, b3 = artifacts.get_typed_vertices(['b1', 'b2', 'b3'], Block)
        dummy = artifacts.get_typed_vertex('dummy', Transaction)
        nc1, nc2, nc3, nc4 = artifacts.get_typed_vertices(['nc1', 'nc2', 'nc3', 'nc4'], Transaction)
        assert nc1.is_nano_contract()
        assert nc2.is_nano_contract()
        assert nc3.is_nano_contract()
        assert nc4.is_nano_contract()

        responses = self._get_success_responses()

        expected = [
            # LOAD_STATED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # One NEW_VERTEX_ACCEPTED for each genesis (1 block and 2 txs)
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=self.genesis_block_hash, nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_block_hash, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=self.genesis_tx1_hash, nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_tx1_hash, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=self.genesis_tx2_hash, nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_tx2_hash, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # LOAD_FINISHED
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # One VERTEX_METADATA_CHANGED for a new block (below), and one VERTEX_METADATA_CHANGED for each genesis tx (2), adding the new block as their child  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=b1.hash_hex, nonce=0, timestamp=1572636376, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPzq5l2BXiW8jWwfbfvsGUb10AyiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HCHTJiEmKp2E21AJdpfWz3NxHMmtNQRroi', timelock=None))], parents=[self.genesis_block_hash, self.genesis_tx2_hash, self.genesis_tx1_hash], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b1.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw='4', score_raw='16', first_block=None, height=1, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=self.genesis_tx2_hash, nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_tx2_hash, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=b1.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=self.genesis_tx1_hash, nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_tx1_hash, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=b1.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=self.genesis_block_hash, nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_block_hash, spent_outputs=[SpentOutput(index=0, tx_ids=[dummy.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=b1.hash_hex, nonce=0, timestamp=1572636376, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPzq5l2BXiW8jWwfbfvsGUb10AyiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HCHTJiEmKp2E21AJdpfWz3NxHMmtNQRroi', timelock=None))], parents=[self.genesis_block_hash, self.genesis_tx2_hash, self.genesis_tx1_hash], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b1.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw='4', score_raw='16', first_block=None, height=1, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # dummy tx + its spent output being updated
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id=self.genesis_block_hash, index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=[self.genesis_tx2_hash, self.genesis_tx1_hash], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=self.genesis_block_hash, nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=self.genesis_block_hash, spent_outputs=[SpentOutput(index=0, tx_ids=[dummy.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id=self.genesis_block_hash, index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=[self.genesis_tx2_hash, self.genesis_tx1_hash], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # nc1 + its spent output being updated
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc1.hash_hex, nonce=0, timestamp=1572636378, signal_bits=0, version=4, weight=17.8819312127108, inputs=[TxInput(tx_id=dummy.hash_hex, index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc1.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.881932463618046, score=0.0, accumulated_weight_raw='241545', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.777639275691804, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)), TxOutput(value=99999999996, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex]), SpentOutput(index=1, tx_ids=[nc2.hash_hex]), SpentOutput(index=2, tx_ids=[nc3.hash_hex]), SpentOutput(index=3, tx_ids=[nc4.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.777639395103126, score=0.0, accumulated_weight_raw='3595197', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=nc1.hash_hex, nonce=0, timestamp=1572636378, signal_bits=0, version=4, weight=17.8819312127108, inputs=[TxInput(tx_id=dummy.hash_hex, index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc1.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.881932463618046, score=0.0, accumulated_weight_raw='241545', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # nc2 + its spent output being updated
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc2.hash_hex, nonce=0, timestamp=1572636379, signal_bits=0, version=4, weight=17.893191293894695, inputs=[TxInput(tx_id=dummy.hash_hex, index=1, spent_output=TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc1.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc2.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.893188934434693, score=0.0, accumulated_weight_raw='243437', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.777639275691804, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)), TxOutput(value=99999999996, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex]), SpentOutput(index=1, tx_ids=[nc2.hash_hex]), SpentOutput(index=2, tx_ids=[nc3.hash_hex]), SpentOutput(index=3, tx_ids=[nc4.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.777639395103126, score=0.0, accumulated_weight_raw='3595197', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=nc2.hash_hex, nonce=0, timestamp=1572636379, signal_bits=0, version=4, weight=17.893191293894695, inputs=[TxInput(tx_id=dummy.hash_hex, index=1, spent_output=TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc1.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc2.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.893188934434693, score=0.0, accumulated_weight_raw='243437', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # nc3 + its spent output being updated
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc3.hash_hex, nonce=0, timestamp=1572636380, signal_bits=0, version=4, weight=18.081839799876487, inputs=[TxInput(tx_id=dummy.hash_hex, index=2, spent_output=TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUp+HdqawCdjC61o+vrDbEpBOVOmuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HMpoopGYaybBqTotndHfdYxcZBgaqBZbuJ', timelock=None))], parents=[nc2.hash_hex, '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc3.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.081842278001805, score=0.0, accumulated_weight_raw='277445', score_raw='0', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.777639275691804, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)), TxOutput(value=99999999996, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex]), SpentOutput(index=1, tx_ids=[nc2.hash_hex]), SpentOutput(index=2, tx_ids=[nc3.hash_hex]), SpentOutput(index=3, tx_ids=[nc4.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.777639395103126, score=0.0, accumulated_weight_raw='3595197', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=nc3.hash_hex, nonce=0, timestamp=1572636380, signal_bits=0, version=4, weight=18.081839799876487, inputs=[TxInput(tx_id=dummy.hash_hex, index=2, spent_output=TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUp+HdqawCdjC61o+vrDbEpBOVOmuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HMpoopGYaybBqTotndHfdYxcZBgaqBZbuJ', timelock=None))], parents=[nc2.hash_hex, '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc3.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.081842278001805, score=0.0, accumulated_weight_raw='277445', score_raw='0', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # nc4 + its spent output being updated
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc4.hash_hex, nonce=0, timestamp=1572636381, signal_bits=0, version=4, weight=17.853538332406874, inputs=[TxInput(tx_id=dummy.hash_hex, index=3, spent_output=TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUzlvBv/iaHLPIkMzNTBRGei+uvVyIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRLFWEm9bosfc7Z4zZ7YsXACZTmmdA6nZd', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc3.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc4.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.85354105039213, score=0.0, accumulated_weight_raw='236838', score_raw='0', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.777639275691804, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)), TxOutput(value=99999999996, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex]), SpentOutput(index=1, tx_ids=[nc2.hash_hex]), SpentOutput(index=2, tx_ids=[nc3.hash_hex]), SpentOutput(index=3, tx_ids=[nc4.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.777639395103126, score=0.0, accumulated_weight_raw='3595197', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=nc4.hash_hex, nonce=0, timestamp=1572636381, signal_bits=0, version=4, weight=17.853538332406874, inputs=[TxInput(tx_id=dummy.hash_hex, index=3, spent_output=TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUzlvBv/iaHLPIkMzNTBRGei+uvVyIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRLFWEm9bosfc7Z4zZ7YsXACZTmmdA6nZd', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc3.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc4.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.85354105039213, score=0.0, accumulated_weight_raw='236838', score_raw='0', first_block=None, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # b2
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=b2.hash_hex, nonce=0, timestamp=1572636410, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUJ06XQc3Dh7A9qUwUwMzxnljQX0eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HA6xtQwPwLUceMNhQe8VVxdc3sT6yx8re6', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', nc2.hash_hex, '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b2.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.960208086548366, accumulated_weight_raw='4', score_raw='4080199', first_block=None, height=2, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc2.hash_hex, nonce=0, timestamp=1572636379, signal_bits=0, version=4, weight=17.893191293894695, inputs=[TxInput(tx_id=dummy.hash_hex, index=1, spent_output=TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc1.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc2.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.893188934434693, score=0.0, accumulated_weight_raw='243437', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc1.hash_hex, nonce=0, timestamp=1572636378, signal_bits=0, version=4, weight=17.8819312127108, inputs=[TxInput(tx_id=dummy.hash_hex, index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc1.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.881932463618046, score=0.0, accumulated_weight_raw='241545', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=dummy.hash_hex, nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.777639275691804, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)), TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)), TxOutput(value=99999999996, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=dummy.hash_hex, spent_outputs=[SpentOutput(index=0, tx_ids=[nc1.hash_hex]), SpentOutput(index=1, tx_ids=[nc2.hash_hex]), SpentOutput(index=2, tx_ids=[nc3.hash_hex]), SpentOutput(index=3, tx_ids=[nc4.hash_hex])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.777639395103126, score=0.0, accumulated_weight_raw='3595197', score_raw='0', first_block=b2.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id=nc1.hash_hex, nc_id=nc1.hash_hex, nc_execution='success', first_block=b2.hash_hex, data_hex=b'test event on initialize 1'.hex()), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id=nc2.hash_hex, nc_id=nc1.hash_hex, nc_execution='success', first_block=b2.hash_hex, data_hex=b'test event on initialize 2'.hex()), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=b2.hash_hex, nonce=0, timestamp=1572636410, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUJ06XQc3Dh7A9qUwUwMzxnljQX0eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HA6xtQwPwLUceMNhQe8VVxdc3sT6yx8re6', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', nc2.hash_hex, '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b2.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.960208086548366, accumulated_weight_raw='4', score_raw='4080199', first_block=None, height=2, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            # b3
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc4.hash_hex, nonce=0, timestamp=1572636381, signal_bits=0, version=4, weight=17.853538332406874, inputs=[TxInput(tx_id=dummy.hash_hex, index=3, spent_output=TxOutput(value=1, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUzlvBv/iaHLPIkMzNTBRGei+uvVyIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRLFWEm9bosfc7Z4zZ7YsXACZTmmdA6nZd', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nc3.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc4.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[nc4.hash_hex, '6e632d6661696c'], received_by=[], twins=[], accumulated_weight=17.85354105039213, score=0.0, accumulated_weight_raw='236838', score_raw='0', first_block=b3.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=b3.hash_hex, nonce=0, timestamp=1572636441, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUedvINGyDuDTh8tywE28Gba3mgH+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HHdTSHDJni47grVGYs4q3pi81qTEfDHL6S', timelock=None))], parents=[b2.hash_hex, nc2.hash_hex, nc4.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b3.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=22.131472040908342, accumulated_weight_raw='4', score_raw='4594486', first_block=None, height=3, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash=nc3.hash_hex, nonce=0, timestamp=1572636380, signal_bits=0, version=4, weight=18.081839799876487, inputs=[TxInput(tx_id=dummy.hash_hex, index=2, spent_output=TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUp+HdqawCdjC61o+vrDbEpBOVOmuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HMpoopGYaybBqTotndHfdYxcZBgaqBZbuJ', timelock=None))], parents=[nc2.hash_hex, '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=nc3.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=18.081842278001805, score=0.0, accumulated_weight_raw='277445', score_raw='0', first_block=b3.hash_hex, height=0, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id=nc3.hash_hex, nc_id=nc2.hash_hex, nc_execution='success', first_block=b3.hash_hex, data_hex=b'test event on call_another'.hex()), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id=nc3.hash_hex, nc_id=nc1.hash_hex, nc_execution='success', first_block=b3.hash_hex, data_hex=b'test event on some_method'.hex()), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash=b3.hash_hex, nonce=0, timestamp=1572636441, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUedvINGyDuDTh8tywE28Gba3mgH+IrA==', decoded=DecodedTxOutput(type='P2PKH', address='HHdTSHDJni47grVGYs4q3pi81qTEfDHL6S', timelock=None))], parents=[b2.hash_hex, nc2.hash_hex, nc4.hash_hex], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash=b3.hash_hex, spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=22.131472040908342, accumulated_weight_raw='4', score_raw='4594486', first_block=None, height=3, validation='full')), group_id=None), latest_event_id=37, stream_id=stream_id),  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    @pytest.mark.skip(reason='broken')
    def test_nc_events_reorg(self) -> None:
        stream_id = self.manager._event_manager._stream_id
        assert stream_id is not None
        artifacts = Scenario.NC_EVENTS_REORG.simulate(self.simulator, self.manager)
        assert artifacts is not None
        self._start_stream()

        responses = self._get_success_responses()

        expected = [
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=0, timestamp=0, type=EventType.LOAD_STARTED, data=EmptyData(), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=1, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=2, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=3, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=4, timestamp=0, type=EventType.LOAD_FINISHED, data=EmptyData(), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=5, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', nonce=0, timestamp=1572636376, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPzq5l2BXiW8jWwfbfvsGUb10AyiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HCHTJiEmKp2E21AJdpfWz3NxHMmtNQRroi', timelock=None))], parents=['2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw='4', score_raw='16', first_block=None, height=1, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=6, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', nonce=2, timestamp=1572636345, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=7, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', nonce=6, timestamp=1572636344, signal_bits=0, version=1, weight=2.0, inputs=[], outputs=[], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=8, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', spent_outputs=[SpentOutput(index=0, tx_ids=['26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=9, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', nonce=0, timestamp=1572636376, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUPzq5l2BXiW8jWwfbfvsGUb10AyiIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HCHTJiEmKp2E21AJdpfWz3NxHMmtNQRroi', timelock=None))], parents=['2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=4.0, accumulated_weight_raw='4', score_raw='16', first_block=None, height=1, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=10, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=11, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', nonce=5, timestamp=1572636343, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None))], parents=[], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', spent_outputs=[SpentOutput(index=0, tx_ids=['26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=2.0, accumulated_weight_raw='4', score_raw='4', first_block=None, height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=12, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=13, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=14, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=15, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=16, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', nonce=0, timestamp=1572636409, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=17, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=18, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            # nc1 is executed for the first time
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=19, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_execution='success', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', data_hex=b'test event on initialize 1'.hex()), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=20, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', nonce=0, timestamp=1572636409, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=21, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', nonce=0, timestamp=1572636440, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', spent_outputs=[], conflict_with=[], voided_by=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=22, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', nonce=0, timestamp=1572636409, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=23, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=24, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=25, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', nonce=0, timestamp=1572636440, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', spent_outputs=[], conflict_with=[], voided_by=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            # a reorg happens, reexecuting nc1
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=26, timestamp=0, type=EventType.REORG_STARTED, data=ReorgData(reorg_size=1, previous_best_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', new_best_block='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', common_block='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6'), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=27, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', nonce=0, timestamp=1572636471, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', spent_outputs=[], conflict_with=[], voided_by=['385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=28, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', nonce=0, timestamp=1572636440, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', spent_outputs=[], conflict_with=[], voided_by=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=29, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=30, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            # nc1 is executed for the second time
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=31, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_execution='success', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', data_hex=b'test event on initialize 1'.hex()), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=32, timestamp=0, type=EventType.REORG_FINISHED, data=EmptyData(), group_id=0), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=33, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', nonce=0, timestamp=1572636471, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', spent_outputs=[], conflict_with=[], voided_by=['385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=34, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', nonce=0, timestamp=1572636502, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=35, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', nonce=0, timestamp=1572636471, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUuREy3ZBqH13akgzR38nfAl3QLryIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HPPfzpTiAfyj6gsbHG7FQsYUbVXaSg9MQK', timelock=None))], parents=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', spent_outputs=[], conflict_with=[], voided_by=['385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=36, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', nonce=0, timestamp=1572636440, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUH3DCvvDLG1Vgxw9QKnqEFygPQbKIrA==', decoded=DecodedTxOutput(type='P2PKH', address='H9PNR3V6vdzSr7t394NGWB5uabCuhtN1LV', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c', spent_outputs=[], conflict_with=[], voided_by=['d1fa99db1041855845d4bbf76603b124190aa19fd2e65e689faa4062497f4b7c'], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=37, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=38, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=39, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', nonce=0, timestamp=1572636502, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            # another reorg happens, reexecuting nc1 again
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=40, timestamp=0, type=EventType.REORG_STARTED, data=ReorgData(reorg_size=2, previous_best_block='385811b93c2926cc9e599f2ea9f482af98def3e0b394d4e6cb6a151f4a5127ad', new_best_block='be9f0c15423b88ddb7b0a4ef4c86f252b4d4e179f4e9ae357775766fca7226c1', common_block='76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6'), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=41, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='be9f0c15423b88ddb7b0a4ef4c86f252b4d4e179f4e9ae357775766fca7226c1', nonce=0, timestamp=1572636533, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUp+HdqawCdjC61o+vrDbEpBOVOmuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HMpoopGYaybBqTotndHfdYxcZBgaqBZbuJ', timelock=None))], parents=['a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='be9f0c15423b88ddb7b0a4ef4c86f252b4d4e179f4e9ae357775766fca7226c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267586248288318, accumulated_weight_raw='4', score_raw='2524535', first_block=None, height=4, validation='full', nc_execution=None)), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=42, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', nonce=0, timestamp=1572636502, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUoFBWk4Dv5WGbe4jvvVKoLI/iAMeIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HM8nk2q74k3nLh4FnUWfCgyuT165bmHyvu', timelock=None))], parents=['f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267583962408054, accumulated_weight_raw='4', score_raw='2524531', first_block=None, height=3, validation='full', nc_execution=None)), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=43, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', nonce=0, timestamp=1572636409, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUSs2wh6dehIfZfwWtUCkvVL6mm8eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HDLeo6r8wB8schqaMxrLP1HrrpBVZeRfWY', timelock=None))], parents=['76d8bb18b24173fe72898faf2a09606b09af78a22cb3a087cd88f2faed67c0f6', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267581676524166, accumulated_weight_raw='4', score_raw='2524527', first_block=None, height=2, validation='full', nc_execution=None)), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=44, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nonce=0, timestamp=1572636378, signal_bits=0, version=1, weight=17.90997909200292, inputs=[TxInput(tx_id='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', index=0, spent_output=TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkUywjnDVLCo2DvKimDErqN97qgd+SIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HR2gDr1CEhH8oaBPdjgMddzcxiESgmPdPQ', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=17.909980953144554, score=0.0, accumulated_weight_raw='246287', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution='success')), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=45, timestamp=0, type=EventType.VERTEX_METADATA_CHANGED, data=TxData(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', nonce=0, timestamp=1572636377, signal_bits=0, version=1, weight=21.119475351738224, inputs=[TxInput(tx_id='2ebb3b8edcb72a7e46cc0efacfe1b109e2e9dd868a90fe0906968dc8fbbf6488', index=0, spent_output=TxOutput(value=100000000000, token_data=0, script='dqkU0HvILW4NG7EWYUB2ZF6bh8jIO0GIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HRXVDmLVdq8pgok1BCUKpiFWdAVAy4a5AJ', timelock=None)))], outputs=[TxOutput(value=1, token_data=0, script='dqkU80nn8+AtzngP5Dna6XSwXuuCC/eIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HUhX83RJxSmUoffvmTNsLa4kAf33Y7GtuA', timelock=None)), TxOutput(value=99999999999, token_data=0, script='dqkUf5BkCh0suqADvCnN6YjtldkKnueIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HJ9dB9tKwFs8MGvcgdSpZZbVXWxpFZ9tBs', timelock=None))], parents=['16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '33e14cb555a96967841dcbe0f95e9eab5810481d01de8f4f73afb8cce365e869'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='26c218df92c9d6410c9b9a7093a35cb046f959e12dc8727b7cc6671c78177dea', spent_outputs=[SpentOutput(index=0, tx_ids=['94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'])], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=21.11947563927789, score=0.0, accumulated_weight_raw='2278220', score_raw='0', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', height=0, validation='full', nc_execution=None)), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            # nc1 is reexecuted for the third and final time
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=46, timestamp=0, type=EventType.NC_EVENT, data=NCEventData(vertex_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_id='94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c', nc_execution='success', first_block='f3201793cb10fb5d3821773f169d33934a4127c5636128bf07c2e266a2ca3e5f', data_hex=b'test event on initialize 1'.hex()), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=47, timestamp=0, type=EventType.REORG_FINISHED, data=EmptyData(), group_id=1), latest_event_id=48, stream_id=stream_id),  # noqa: E501
            EventResponse(type='EVENT', peer_id=self.peer_id, network='unittests', event=BaseEvent(id=48, timestamp=0, type=EventType.NEW_VERTEX_ACCEPTED, data=TxData(hash='be9f0c15423b88ddb7b0a4ef4c86f252b4d4e179f4e9ae357775766fca7226c1', nonce=0, timestamp=1572636533, signal_bits=0, version=0, weight=2.0, inputs=[], outputs=[TxOutput(value=6400, token_data=0, script='dqkUp+HdqawCdjC61o+vrDbEpBOVOmuIrA==', decoded=DecodedTxOutput(type='P2PKH', address='HMpoopGYaybBqTotndHfdYxcZBgaqBZbuJ', timelock=None))], parents=['a67ca8b6c423b08d06f61e5aae8b58ae00e028b8ae914b9c7943f27f01749842', '16ba3dbe424c443e571b00840ca54b9ff4cff467e10b6a15536e718e2008f952', '94b6278e7bac5b5ebb0888a0eb742868111b3a04b004cfbaf3b1786504815c8c'], tokens=[], token_name=None, token_symbol=None, aux_pow=None, metadata=TxMetadata(hash='be9f0c15423b88ddb7b0a4ef4c86f252b4d4e179f4e9ae357775766fca7226c1', spent_outputs=[], conflict_with=[], voided_by=[], received_by=[], twins=[], accumulated_weight=2.0, score=21.267586248288318, accumulated_weight_raw='4', score_raw='2524535', first_block=None, height=4, validation='full', nc_execution=None)), group_id=None), latest_event_id=48, stream_id=stream_id)  # noqa: E501
        ]

        self.assert_response_equal(responses, expected)

    def _start_stream(self) -> None:
        start_stream = StartStreamRequest(type='START_STREAM', window_size=1_000_000, last_ack_event_id=None)
        self._send_request(start_stream)
        self.simulator.run(60)


def _remove_timestamp(responses: list[EventResponse]) -> list[EventResponse]:
    for response in responses:
        # We remove the event timestamp from the comparison as it's not important and
        # can be affected by other parts of the code.
        del response.event.timestamp

    return responses
